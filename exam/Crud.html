<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Product Management System</title>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', sans-serif;
    }

    body {
        background: #f4f6f9;
    }

    header {
        background: #1e293b;
        color: white;
        padding: 20px;
        text-align: center;
        font-size: 24px;
        font-weight: bold;
    }

    .container {
        width: 90%;
        max-width: 1200px;
        margin: 30px auto;
    }

    .form-section, .filter-section {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        margin-bottom: 25px;
    }

    .form-group {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
    }

    .form-group input, .form-group select {
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        flex: 1;
        min-width: 180px;
    }

    button {
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: 0.3s;
    }

    .btn-primary {
        background: #2563eb;
        color: white;
    }

    .btn-primary:hover {
        background: #1e40af;
    }

    .btn-danger {
        background: #dc2626;
        color: white;
    }

    .btn-warning {
        background: #f59e0b;
        color: white;
    }

    .products {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 20px;
    }

    .card {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        transition: 0.3s;
    }

    .card:hover {
        transform: translateY(-5px);
    }

    .card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
    }

    .card h3 {
        margin: 10px 0 5px;
    }

    .card p {
        margin: 5px 0;
        color: #555;
    }

    .card-buttons {
        margin-top: 10px;
        display: flex;
        justify-content: space-between;
    }

    @media (max-width: 600px) {
        .form-group {
            flex-direction: column;
        }
    }
</style>
</head>
<body>

<header>Product Management System</header>

<div class="container">

    <div class="form-section">
        <h2>Add / Edit Product</h2><br>
        <div class="form-group">
            <input type="text" id="title" placeholder="Product Title">
            <input type="number" id="price" placeholder="Price">
            <input type="text" id="image" placeholder="Image URL">
            <input type="text" id="category" placeholder="Category">
            <button class="btn-primary" onclick="addProduct()">Save Product</button>
        </div>
    </div>

    <div class="filter-section">
        <div class="form-group">
            <input type="text" id="search" placeholder="Search by Title" onkeyup="displayProducts()">
            <select id="sort" onchange="displayProducts()">
                <option value="">Sort by Price</option>
                <option value="low">Low to High</option>
                <option value="high">High to Low</option>
            </select>
            <input type="text" id="filterCategory" placeholder="Filter by Category" onkeyup="displayProducts()">
        </div>
    </div>


    <div class="products" id="productList"></div>

</div>



<script>
let products = JSON.parse(localStorage.getItem("products")) || [];
let editId = null;

function saveToLocal() {
    localStorage.setItem("products", JSON.stringify(products));
}

function addProduct() {
    let title = document.getElementById("title").value.trim();
    let price = document.getElementById("price").value.trim();
    let image = document.getElementById("image").value.trim();
    let category = document.getElementById("category").value.trim();

    if (!title || !price) {
        alert("Title and Price are required!");
        return;
    }

    if (editId !== null) {
        let product = products.find(p => p.id === editId);
        product.title = title;
        product.price = parseFloat(price);
        product.image = image;
        product.category = category;
        editId = null;
    } else {
        products.push({
            id: Date.now(),
            title,
            price: parseFloat(price),
            image,
            category
        });
    }

    saveToLocal();
    clearInputs();
    displayProducts();
}

function displayProducts() {
    let list = document.getElementById("productList");
    list.innerHTML = "";

    let search = document.getElementById("search").value.toLowerCase();
    let sort = document.getElementById("sort").value;
    let filterCategory = document.getElementById("filterCategory").value.toLowerCase();

    let filtered = products.filter(p =>
        p.title.toLowerCase().includes(search) &&
        p.category.toLowerCase().includes(filterCategory)
    );

    if (sort === "low") filtered.sort((a,b)=>a.price-b.price);
    if (sort === "high") filtered.sort((a,b)=>b.price-a.price);

    filtered.forEach(product => {
        list.innerHTML += `
        <div class="card">
            <img src="${product.image || 'https://via.placeholder.com/300'}">
            <h3>${product.title}</h3>
            <p><strong>Price:</strong> $${product.price}</p>
            <p><strong>Category:</strong> ${product.category}</p>
            <div class="card-buttons">
                <button class="btn-warning" onclick="editProduct(${product.id})">Edit</button>
                <button class="btn-danger" onclick="deleteProduct(${product.id})">Delete</button>
            </div>
        </div>
        `;
    });
}

function editProduct(id) {
    let product = products.find(p => p.id === id);
    document.getElementById("title").value = product.title;
    document.getElementById("price").value = product.price;
    document.getElementById("image").value = product.image;
    document.getElementById("category").value = product.category;
    editId = id;
}

function deleteProduct(id) {
    products = products.filter(p => p.id !== id);
    saveToLocal();
    displayProducts();
}

function clearInputs() {
    document.getElementById("title").value = "";
    document.getElementById("price").value = "";
    document.getElementById("image").value = "";
    document.getElementById("category").value = "";
}

displayProducts();
</script>

</body>
</html>
